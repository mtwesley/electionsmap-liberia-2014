{% extends "layout/web.html" %}
{% block title %}Overview - {% endblock %}
{% block content %}
    <div id="content">
        {% set county_result = election.results_by_county(county.first())[0] %}
        {% if county_result %}
            <div class="chart_01 rounded text_a" style="font-size: 14px !important; padding: 8px 0;">
                <strong>{{ county_result.candidate.name }}</strong>
                <strong style="color: {% if result and county_result.candidate.party(election).color %}
                    {{ '#' + county_result.candidate.party(election).color }} {% else %} #555555 {% endif %};">
                    ({{ county_result.candidate.party(election).code }})
                </strong>
                leads with a total of <strong>{{ county_result.votes }}</strong> votes.
                <a class="stylelink" href="{{ url_for('counties', code=county.first().long_code|lower) }}">View more results</a>.
            </div>
        {% endif %}
        <div id="overview_map" class="rounded">{% include 'svg/counties/MONT.svg' %}</div>
        <div id="overview_data" class="rounded">
            {% for d in districts %}
                {% set result = election.results_by_district(d)[0] %}
                {% set votes = election.votes_by_district(d) %}
                <div class="overview_data_ITEM">
                    <div class="text_a overview_data_ITEM_county">
                        <a href="{{ url_for('districts', number=d.number) }}">{{ d.number }}</a>
                    </div>
                    <div class="overview_data_ITEM_partyColor">
                        <div class="overview_data_ITEM_partyColorBox"
                             style="background-color: {% if result and result.candidate.party(election).color %}
                                 {{ '#' + result.candidate.party(election).color }}
                             {% else %}
                                 #555555
                             {% endif %};">
                        </div>
                    </div>
                    <div class="text_a overview_data_ITEM_partyName"
                         style="color: {% if result and result.candidate.party(election).color %}
                                 {{ '#' + result.candidate.party(election).color }}
                             {% else %}
                                 #555555
                             {% endif %};">
                        {% if result %}
                            {{ result.candidate.party(election).code }}
                        {% else %}
                            &nbsp;&nbsp;
                        {% endif %}
                    </div>
                    <div class="text_a overview_data_ITEM_percent">
                        {% if result and votes %}
                            {{ (100 * result.votes / votes)|int }}%
                        {% else %}
                            0%
                        {% endif %}
                    </div>
                    <div class="text_a overview_data_ITEM_candidate">
                        {% if result %}
                            <a href="{{ url_for('candidates', code=result.candidate.code.lower()) }}" class="view_candidate">
                                {{ result.candidate.name }}
                            </a>
                        {% else %}
                            <a href="#" class="view_candidate">
                                &nbsp;&nbsp;
                            </a>
                        {% endif %}
                    </div>
                </div>
                {% if result %}
                    <div class="powertip" id="district-{{ d.number }}">
                        <img src="{{ url_for('static', filename=(result.candidate.photo.path or ('images/candidates/' + result.candidate.code|string + '_thumb.jpg') or 'images/news_thumb_00.jpg')) }}">
                        {{ result.candidate.name }} - {{ (100 * result.votes / votes)|int }}%<br>
                        <span style="color: #{{ result.candidate.party(election).color or '555555' }}">{{ result.candidate.party(election).name }}</span>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}
